{% comment %}
  Cart page — High-End Editorial Fashion / Dark theme
  https://shopify.dev/docs/storefronts/themes/architecture/templates/cart
{% endcomment %}

<div class="cart-pg full-width">

  {% comment %} ── Page heading ──────────────────────────────────────────── {% endcomment %}
  <div class="cart-pg__head">
    <p class="cart-pg__eyebrow">{{ 'cart.eyebrow' | t }}</p>
    <h1 class="cart-pg__title">{{ 'cart.title' | t }}</h1>
    {% if cart.item_count > 0 %}
      <p class="cart-pg__count">
        {{ cart.item_count }} {{ cart.item_count | pluralize: 'cart.piece', 'cart.pieces' | t }}
      </p>
    {% endif %}
  </div>

  {% if cart.item_count == 0 %}

    {% comment %} ── Empty state ───────────────────────────────────────── {% endcomment %}
    <div class="cart-empty">
      <p class="cart-empty__msg">{{ 'cart.empty' | t }}</p>
      <a class="cart-empty__cta" href="{{ routes.collections_url }}">
        {{ 'cart.continue_shopping' | t }}
      </a>
    </div>

  {% else %}

    <div class="cart-pg__body">

      {% comment %} ── LEFT — item list ────────────────────────────────── {% endcomment %}
      <div class="cart-pg__items">

        {% form 'cart', cart, id: 'cart-form' %}

          {% for item in cart.items %}
            <div class="cart-item" data-line="{{ forloop.index }}">

              {% comment %} Photo ───────────────────────────── {% endcomment %}
              <a class="cart-item__media" href="{{ item.url }}">
                {% if item.image %}
                  {{ item.image
                    | image_url: width: 600, height: 800, crop: 'center'
                    | image_tag:
                      class: 'cart-item__img',
                      loading: 'lazy',
                      widths: '200, 300, 450, 600',
                      sizes: '(max-width: 767px) 28vw, 14vw'
                  }}
                {% else %}
                  {{ 'image' | placeholder_svg_tag: 'cart-item__img cart-item__img--empty' }}
                {% endif %}
              </a>

              {% comment %} Info ────────────────────────────── {% endcomment %}
              <div class="cart-item__info">
                <div class="cart-item__meta">
                  <p class="cart-item__vendor">{{ item.vendor | escape }}</p>
                  <a class="cart-item__name" href="{{ item.url }}">
                    {{ item.product.title | escape }}
                  </a>
                  {% unless item.variant.title == 'Default Title' %}
                    <p class="cart-item__variant">{{ item.variant.title | escape }}</p>
                  {% endunless %}
                </div>

                {% comment %} Quantity controls ───────────────── {% endcomment %}
                <div class="cart-item__controls">
                  <div class="cart-qty">
                    <button
                      class="cart-qty__btn"
                      type="button"
                      data-action="decrease"
                      data-line="{{ forloop.index }}"
                      aria-label="{{ 'cart.decrease_qty' | t }}"
                    >—</button>
                    <input
                      class="cart-qty__input"
                      type="number"
                      name="updates[]"
                      value="{{ item.quantity }}"
                      min="0"
                      data-line="{{ forloop.index }}"
                      aria-label="{{ 'cart.qty_label' | t }}"
                    >
                    <button
                      class="cart-qty__btn"
                      type="button"
                      data-action="increase"
                      data-line="{{ forloop.index }}"
                      aria-label="{{ 'cart.increase_qty' | t }}"
                    >+</button>
                  </div>

                  <a
                    class="cart-item__remove"
                    href="{{ item.url_to_remove }}"
                    aria-label="{{ 'cart.remove_item' | t: title: item.title }}"
                  >{{ 'cart.remove' | t }}</a>
                </div>

              </div>

              {% comment %} Price ───────────────────────────── {% endcomment %}
              <div class="cart-item__price-wrap">
                {% if item.original_line_price != item.final_line_price %}
                  <s class="cart-item__price cart-item__price--was">
                    {{ item.original_line_price | money }}
                  </s>
                {% endif %}
                <span class="cart-item__price">{{ item.final_line_price | money }}</span>
              </div>

            </div>
          {% endfor %}

          {% comment %} hidden submit for JS qty updates {% endcomment %}
          <button type="submit" name="update" id="cart-update-btn" hidden aria-hidden="true">
            {{ 'cart.update' | t }}
          </button>

        {% endform %}

      </div>

      {% comment %} ── RIGHT — summary ─────────────────────────────────── {% endcomment %}
      <aside class="cart-summary">

        {% if cart.cart_level_discount_applications.size > 0 %}
          <div class="cart-summary__discounts">
            {% for discount in cart.cart_level_discount_applications %}
              <div class="cart-summary__discount">
                <span class="cart-summary__discount-title">{{ discount.title | escape }}</span>
                <span class="cart-summary__discount-amount">
                  &minus;{{ discount.total_allocated_amount | money }}
                </span>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <div class="cart-summary__row cart-summary__row--total">
          <span class="cart-summary__label">{{ 'cart.subtotal' | t }}</span>
          <span class="cart-summary__total">{{ cart.total_price | money_with_currency }}</span>
        </div>

        <p class="cart-summary__note">{{ 'cart.taxes_note' | t }}</p>

        <form action="{{ routes.cart_url }}/checkout" method="post">
          <button type="submit" name="checkout" class="cart-summary__checkout">
            {{ 'cart.checkout' | t }}
          </button>
        </form>

        {% if additional_checkout_buttons %}
          <div class="cart-summary__alt-payments">
            <p class="cart-summary__or">{{ 'cart.or' | t }}</p>
            {{ content_for_additional_checkout_buttons }}
          </div>
        {% endif %}

        <a class="cart-summary__back" href="{{ routes.collections_url }}">
          {{ 'cart.continue_shopping' | t }}
        </a>

      </aside>

    </div>

  {% endif %}

</div>

{% javascript %}
  (function () {
    var form = document.getElementById('cart-form');
    if (!form) return;

    function submitUpdate() {
      var btn = document.getElementById('cart-update-btn');
      if (btn) btn.click();
    }

    document.querySelectorAll('.cart-qty__btn').forEach(function (btn) {
      btn.addEventListener('click', function () {
        var line  = btn.dataset.line;
        var input = form.querySelector('.cart-qty__input[data-line="' + line + '"]');
        if (!input) return;
        var val = parseInt(input.value, 10) || 0;
        if (btn.dataset.action === 'increase') {
          input.value = val + 1;
        } else {
          input.value = Math.max(0, val - 1);
        }
        submitUpdate();
      });
    });
  })();
{% endjavascript %}

{% stylesheet %}
  /* ── Tokens ──────────────────────────────────────────────── */
  .cart-pg,
  .cart-empty,
  .cart-summary {
    --bg:    #0a0a09;
    --cream: #f0ede5;
    --muted: rgba(240, 237, 229, 0.45);
    --line:  rgba(240, 237, 229, 0.1);
    --serif: var(--font-heading--family, "Playfair Display", Georgia, serif);
    --sans:  var(--font-body--family,    "Work Sans", system-ui, sans-serif);
  }

  /* ── WRAPPER ─────────────────────────────────────────────── */
  .cart-pg {
    background: var(--bg) !important;
    color:      var(--cream);
    padding:    clamp(8rem, 16vw, 13rem) clamp(1.5rem, 6vw, 6rem) clamp(5rem, 9vw, 8rem);
    min-height: 100vh;
    box-sizing: border-box;
  }

  /* ── HEAD ────────────────────────────────────────────────── */
  .cart-pg__head {
    margin-bottom: 3.5rem;
    border-bottom: 1px solid var(--line);
    padding-bottom: 2rem;
  }

  .cart-pg__eyebrow {
    font-family:    var(--sans);
    font-size:      0.58rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color:          var(--muted);
    margin:         0 0 0.8rem;
  }

  .cart-pg__title {
    font-family:    var(--serif);
    font-weight:    300;
    font-size:      clamp(2.4rem, 5vw, 4.5rem);
    line-height:    1;
    letter-spacing: -0.025em;
    color:          var(--cream);
    margin:         0 0 0.5rem;
  }

  .cart-pg__count {
    font-family:    var(--sans);
    font-size:      0.65rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color:          var(--muted);
    margin:         0;
  }

  /* ── 2-COL BODY ──────────────────────────────────────────── */
  .cart-pg__body {
    display:               grid;
    grid-template-columns: 1fr 360px;
    gap:                   0 4rem;
    align-items:           start;
  }

  /* ── ITEM LIST ───────────────────────────────────────────── */
  .cart-pg__items { display: flex; flex-direction: column; }

  /* ── SINGLE CART ITEM ────────────────────────────────────── */
  .cart-item {
    display:       grid;
    grid-template-columns: 120px 1fr auto;
    gap:           0 1.8rem;
    align-items:   start;
    padding:       2rem 0;
    border-bottom: 1px solid var(--line);
  }

  .cart-item:first-child { border-top: 1px solid var(--line); }

  /* Photo */
  .cart-item__media {
    display:       block;
    aspect-ratio:  3 / 4;
    overflow:      hidden;
    flex-shrink:   0;
    background:    #1c1b19;
  }

  .cart-item__img {
    display:       block;
    width:         100%;
    height:        100%;
    object-fit:    cover;
    border-radius: 0 !important;
    filter:        saturate(0.8) contrast(1.05);
    transition:    transform 600ms cubic-bezier(0.22,1,0.36,1);
  }

  .cart-item__media:hover .cart-item__img { transform: scale(1.04); }

  .cart-item__img--empty {
    width: 100%; height: 100%;
    opacity: 0.12;
  }

  /* Info */
  .cart-item__info {
    display:        flex;
    flex-direction: column;
    justify-content: space-between;
    gap:            1.2rem;
    padding:        0.15rem 0;
  }

  .cart-item__vendor {
    font-family:    var(--sans);
    font-size:      0.54rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color:          var(--muted);
    margin:         0 0 0.3rem;
  }

  .cart-item__name {
    font-family:    var(--sans);
    font-size:      0.7rem;
    font-weight:    400;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color:          var(--cream);
    text-decoration: none;
    line-height:    1.5;
    display:        block;
    margin:         0 0 0.25rem;
    transition:     opacity 200ms;
  }

  .cart-item__name:hover { opacity: 0.7; }

  .cart-item__variant {
    font-family:    var(--sans);
    font-size:      0.6rem;
    letter-spacing: 0.1em;
    color:          var(--muted);
    margin:         0;
  }

  /* Controls row */
  .cart-item__controls {
    display:     flex;
    align-items: center;
    gap:         1.8rem;
  }

  /* Qty widget */
  .cart-qty {
    display:     flex;
    align-items: center;
    gap:         0;
    border:      1px solid rgba(240, 237, 229, 0.2);
  }

  .cart-qty__btn {
    background:     transparent;
    border:         none;
    color:          var(--cream);
    width:          2.2rem;
    height:         2.2rem;
    font-family:    var(--sans);
    font-size:      0.9rem;
    line-height:    1;
    cursor:         pointer;
    display:        flex;
    align-items:    center;
    justify-content: center;
    opacity:        0.65;
    transition:     opacity 180ms;
    padding:        0;
  }

  .cart-qty__btn:hover { opacity: 1; }

  .cart-qty__input {
    background:     transparent !important;
    border:         none !important;
    border-left:    1px solid rgba(240,237,229,.2) !important;
    border-right:   1px solid rgba(240,237,229,.2) !important;
    border-radius:  0 !important;
    box-shadow:     none !important;
    width:          2.6rem;
    height:         2.2rem;
    text-align:     center;
    font-family:    var(--sans) !important;
    font-size:      0.75rem !important;
    color:          var(--cream) !important;
    outline:        none !important;
    -webkit-appearance: textfield;
    appearance:     textfield;
    padding:        0 !important;
  }

  /* hide number spin arrows */
  .cart-qty__input::-webkit-inner-spin-button,
  .cart-qty__input::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }

  /* Remove link */
  .cart-item__remove {
    font-family:    var(--sans);
    font-size:      0.55rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color:          var(--muted);
    text-decoration: none;
    border-bottom:  1px solid transparent;
    padding-bottom: 1px;
    transition:     color 200ms, border-color 200ms;
    white-space:    nowrap;
  }

  .cart-item__remove:hover {
    color:        var(--cream);
    border-color: rgba(240,237,229,.4);
  }

  /* Price column */
  .cart-item__price-wrap {
    display:        flex;
    flex-direction: column;
    align-items:    flex-end;
    gap:            0.2rem;
    padding-top:    0.15rem;
  }

  .cart-item__price {
    font-family:  var(--serif);
    font-style:   italic;
    font-size:    1rem;
    color:        var(--cream);
    white-space:  nowrap;
  }

  .cart-item__price--was {
    font-size:       0.72rem;
    font-style:      normal;
    color:           var(--muted);
    text-decoration: line-through;
  }

  /* ── SUMMARY PANEL ───────────────────────────────────────── */
  .cart-summary {
    position:       sticky;
    top:            6rem;
    background:     transparent;
    border-top:     1px solid var(--line);
    padding-top:    2rem;
  }

  .cart-summary__discounts {
    margin-bottom: 1.5rem;
    display:       flex;
    flex-direction: column;
    gap:           0.6rem;
  }

  .cart-summary__discount {
    display:         flex;
    justify-content: space-between;
    font-family:     var(--sans);
    font-size:       0.7rem;
    letter-spacing:  0.1em;
    text-transform:  uppercase;
    color:           var(--muted);
  }

  .cart-summary__discount-amount { color: rgba(180,220,160,.8); }

  .cart-summary__row {
    display:         flex;
    justify-content: space-between;
    align-items:     baseline;
    margin-bottom:   0.75rem;
  }

  .cart-summary__label {
    font-family:    var(--sans);
    font-size:      0.6rem;
    letter-spacing: 0.26em;
    text-transform: uppercase;
    color:          var(--muted);
  }

  .cart-summary__total {
    font-family:  var(--serif);
    font-style:   italic;
    font-size:    1.55rem;
    color:        var(--cream);
  }

  .cart-summary__note {
    font-family:  var(--sans);
    font-size:    0.6rem;
    color:        var(--muted);
    margin:       0.4rem 0 2rem;
    line-height:  1.5;
  }

  /* Checkout CTA — inverted cream button */
  .cart-summary__checkout {
    display:        block;
    width:          100%;
    padding:        1rem 1.5rem;
    background:     var(--cream);
    border:         1px solid var(--cream);
    border-radius:  0;
    font-family:    var(--sans);
    font-size:      0.6rem;
    letter-spacing: 0.28em;
    text-transform: uppercase;
    color:          #0a0a09;
    cursor:         pointer;
    text-align:     center;
    transition:     background 220ms, color 220ms, border-color 220ms;
    box-shadow:     none;
    outline:        none;
    -webkit-appearance: none;
    appearance:     none;
  }

  .cart-summary__checkout:hover {
    background:   transparent;
    color:        var(--cream);
  }

  .cart-summary__checkout:focus-visible {
    outline:       1px solid rgba(240,237,229,.5);
    outline-offset: 3px;
  }

  /* Alt payment buttons (Apple Pay, etc.) */
  .cart-summary__alt-payments {
    margin-top: 1.2rem;
  }

  .cart-summary__or {
    font-family:     var(--sans);
    font-size:       0.56rem;
    letter-spacing:  0.2em;
    text-transform:  uppercase;
    color:           var(--muted);
    text-align:      center;
    margin:          0 0 0.8rem;
  }

  /* strip default styles from dynamic checkout buttons */
  .cart-summary__alt-payments .shopify-payment-button__button {
    border-radius: 0 !important;
    box-shadow:    none !important;
  }

  /* Continue shopping */
  .cart-summary__back {
    display:        block;
    margin-top:     1.5rem;
    font-family:    var(--sans);
    font-size:      0.56rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color:          var(--muted);
    text-decoration: none;
    text-align:     center;
    border-bottom:  1px solid transparent;
    padding-bottom: 1px;
    transition:     color 200ms, border-color 200ms;
  }

  .cart-summary__back:hover {
    color:        var(--cream);
    border-color: rgba(240,237,229,.3);
  }

  /* ── EMPTY STATE ─────────────────────────────────────────── */
  .cart-empty {
    display:        flex;
    flex-direction: column;
    align-items:    center;
    justify-content: center;
    min-height:     35vh;
    gap:            2.5rem;
    text-align:     center;
  }

  .cart-empty__msg {
    font-family:  var(--serif);
    font-style:   italic;
    font-weight:  300;
    font-size:    clamp(1.4rem, 3vw, 2.2rem);
    color:        var(--muted);
    margin:       0;
  }

  .cart-empty__cta {
    font-family:    var(--sans);
    font-size:      0.62rem;
    letter-spacing: 0.24em;
    text-transform: uppercase;
    color:          var(--cream);
    text-decoration: none;
    border-bottom:  1px solid rgba(240,237,229,.35);
    padding-bottom: 3px;
    transition:     border-color 220ms, color 220ms;
  }

  .cart-empty__cta:hover { border-color: var(--cream); color: #fff; }

  /* ── RESPONSIVE ──────────────────────────────────────────── */
  @media (max-width: 900px) {
    .cart-pg__body {
      grid-template-columns: 1fr;
      gap: 3rem;
    }

    .cart-summary {
      position:   static;
      border-top: none;
      border-top: 1px solid var(--line);
      padding-top: 2rem;
    }
  }

  @media (max-width: 640px) {
    .cart-pg {
      padding: clamp(6.5rem, 20vw, 9rem) 1.1rem clamp(3.5rem, 8vw, 5rem);
    }

    .cart-item {
      grid-template-columns: 88px 1fr;
      grid-template-rows:    auto auto;
      gap:                   0 1.2rem;
    }

    /* price moves to second row, full width */
    .cart-item__price-wrap {
      grid-column:  2 / 3;
      align-items:  flex-start;
      padding-top:  0.8rem;
    }

    .cart-item__controls { flex-wrap: wrap; gap: 1rem; }

    .cart-summary__checkout { font-size: 0.58rem; padding: 0.9rem 1rem; }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.cart",
  "settings": []
}
{% endschema %}
