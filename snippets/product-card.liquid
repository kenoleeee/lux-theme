{% doc %}
  Renders a single product card — High-End Editorial dark theme.
  Must be rendered inside .coll-section for proper CSS scoping.

  @param {product} product - The product object
  @param {boolean} [offset] - Adds vertical stagger margin on even cards (desktop)

  @example
  {% render 'product-card', product: product %}
  {% render 'product-card', product: product, offset: true %}
{% enddoc %}

<article class="pc{% if offset %} pc--offset{% endif %}">
  <a class="pc__link" href="{{ product.url }}" aria-label="{{ product.title | escape }}">

    {% comment %} ── Media ────────────────────────────────────────────── {% endcomment %}
    <div class="pc__media">

      {% if product.featured_image %}
        {%- assign img_loading = 'lazy' -%}
        {{ product.featured_image
          | image_url: width: 1200, height: 1600, crop: 'center'
          | image_tag:
            class: 'pc__img pc__img--primary',
            loading: img_loading,
            widths: '480, 720, 960, 1200',
            sizes: '(max-width: 640px) 100vw, (max-width: 1100px) 50vw, 33vw'
        }}
      {% else %}
        <div class="pc__img-placeholder"></div>
      {% endif %}

      {% if product.images[1] %}
        {{ product.images[1]
          | image_url: width: 1200, height: 1600, crop: 'center'
          | image_tag:
            class: 'pc__img pc__img--alt',
            loading: 'lazy',
            widths: '480, 720, 960, 1200',
            sizes: '(max-width: 640px) 100vw, (max-width: 1100px) 50vw, 33vw',
            aria_hidden: 'true'
        }}
      {% endif %}

      {% if product.compare_at_price_max > product.price %}
        <span class="pc__badge">{{ 'collections.sale_badge' | t }}</span>
      {% endif %}

    </div>

    {% comment %} ── Info ─────────────────────────────────────────────── {% endcomment %}
    <div class="pc__info">
      {% if product.vendor != blank %}
        <p class="pc__vendor">{{ product.vendor | escape }}</p>
      {% endif %}
      <h2 class="pc__name">{{ product.title | escape }}</h2>
      <p class="pc__price">
        {% if product.compare_at_price_max > product.price %}
          <s class="pc__price-was">{{ product.compare_at_price_max | money }}</s>
        {% endif %}
        {{ product.price | money }}
      </p>
    </div>

  </a>
</article>

{% stylesheet %}
  /* ─── TOKENS ──────────────────────────────────────────────── */
  .pc {
    --cream: #f0ede5;
    --muted: rgba(240, 237, 229, 0.48);
    --dark:  #0a0a09;
    --dim:   #111110;
    --serif: var(--font-heading--family, "Playfair Display", Georgia, serif);
    --sans:  var(--font-body--family,    "Work Sans", system-ui, sans-serif);
  }

  /* ─── CARD — kill every possible base-theme override ─────── */
  .coll-section .pc,
  .coll-section .pc *,
  .coll-section .pc *::before,
  .coll-section .pc *::after {
    box-sizing: border-box;
  }

  .coll-section .pc {
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0;
    display: block;
  }

  .coll-section .pc--offset {
    margin-top: var(--offset, 4rem) !important;
  }

  /* ─── LINK ───────────────────────────────────────────────── */
  .coll-section .pc__link {
    display: block;
    text-decoration: none;
    color: var(--cream);
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    outline-offset: 4px;
  }

  /* ─── MEDIA CONTAINER ────────────────────────────────────── */
  .coll-section .pc__media {
    position: relative;
    overflow: hidden;
    aspect-ratio: 3 / 4;
    background: var(--dim) !important;
    background-color: var(--dim) !important;
    border-radius: 0 !important;
    border: none !important;
    box-shadow: none !important;
    display: block;
  }

  /* ─── IMAGES ─────────────────────────────────────────────── */
  .coll-section .pc__img {
    position: absolute;
    inset: 0;
    width: 100% !important;
    height: 100% !important;
    object-fit: cover;
    border-radius: 0 !important;
    border: none !important;
    margin: 0;
    padding: 0;
    transition:
      opacity   550ms ease,
      transform 700ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  .coll-section .pc__img--primary {
    opacity: 1;
    transform: scale(1);
  }

  .coll-section .pc__img--alt {
    opacity: 0;
    transform: scale(1.04);
  }

  .coll-section .pc__link:hover .pc__img--primary,
  .coll-section .pc__link:focus-visible .pc__img--primary {
    opacity: 0;
    transform: scale(1.04);
  }

  .coll-section .pc__link:hover .pc__img--alt,
  .coll-section .pc__link:focus-visible .pc__img--alt {
    opacity: 1;
    transform: scale(1);
  }

  .coll-section .pc__link:hover .pc__img--primary:only-child {
    opacity: 1;
    transform: scale(1.04);
  }

  /* placeholder when no image */
  .coll-section .pc__img-placeholder {
    position: absolute;
    inset: 0;
    background: var(--dim);
  }

  /* ─── SALE BADGE ─────────────────────────────────────────── */
  .coll-section .pc__badge {
    position: absolute;
    top: 1rem;
    left: 0;
    z-index: 2;
    background: var(--cream) !important;
    color: var(--dark);
    font-family: var(--sans);
    font-size: 0.55rem;
    letter-spacing: 0.24em;
    text-transform: uppercase;
    padding: 0.28rem 0.6rem;
    border-radius: 0 !important;
    border: none !important;
    box-shadow: none !important;
    line-height: 1.4;
  }

  /* ─── INFO ───────────────────────────────────────────────── */
  .coll-section .pc__info {
    padding: 0.9rem 0 0 !important;
    margin: 0;
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  /* ─── VENDOR ─────────────────────────────────────────────── */
  .coll-section .pc__vendor {
    font-family: var(--sans) !important;
    font-size: 0.58rem !important;
    font-weight: 400 !important;
    letter-spacing: 0.24em !important;
    text-transform: uppercase !important;
    color: var(--cream) !important;
    opacity: 0.45;
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    border: none !important;
  }

  /* ─── TITLE ──────────────────────────────────────────────── */
  .coll-section .pc__name {
    font-family: var(--sans) !important;
    font-size: 0.66rem !important;
    font-weight: 400 !important;
    letter-spacing: 0.2em !important;
    text-transform: uppercase !important;
    color: var(--cream) !important;
    line-height: 1.45 !important;
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    border: none !important;
  }

  /* ─── PRICE ──────────────────────────────────────────────── */
  .coll-section .pc__price {
    font-family: var(--serif) !important;
    font-style: italic !important;
    font-size: 1rem !important;
    font-weight: 400 !important;
    color: var(--cream) !important;
    display: flex !important;
    align-items: baseline;
    gap: 0.5rem;
    margin: 0.3rem 0 0 !important;
    padding: 0 !important;
    background: transparent !important;
    border: none !important;
  }

  .coll-section .pc__price-was {
    font-style: normal !important;
    font-size: 0.76rem !important;
    color: var(--muted) !important;
    text-decoration: line-through !important;
  }

  /* ─── MOBILE ─────────────────────────────────────────────── */
  @media (max-width: 767px) {
    .coll-section .pc--offset {
      margin-top: 0 !important;
    }

    .coll-section .pc__name {
      font-size: 0.7rem !important;
      letter-spacing: 0.18em !important;
    }

    .coll-section .pc__price {
      font-size: 0.95rem !important;
    }
  }
{% endstylesheet %}
